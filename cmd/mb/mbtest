#!/bin/zsh
# Delete the project named 
# foo, create a new one by the same
# name, then builds the new one.
#
# Make sure everything happens only in a
# single, safe directory because the foo 
# subdirectory gets blown away and replaced
# each time without warning.
MB=~/code/m/cmd/mb/mb
DIR=~/code/m/cmd/mb/foo

# Delete the old project.
rm -rf $DIR

# Create a new project in the sample place.
$MB new site $DIR

# Create the full directory structure
mkdir -p $DIR/level2/level3
# Populate it with a sample file
cat <<EOM > $DIR/index.md
---
Description: hey now
Theme: pillar 
#Theme: textual 
#Theme: future
#Theme: reference
Sidebar: left
Mode: light
---
# hello, world.
This is in {{ .Page.FrontMatter.Mode }} mode. 
Sidebar type: {{ .Page.FrontMatter.Sidebar }} 

## Pages to try

* [debut](debut.html)
* [debut/gallery](debut-gallery.html)
* [right](right.html) at

Check out that description in the source or 
try visitng the page named [right](right.html) at
the same directory level, or try:

* [level2/index.html](level2/index.html)
* [level2/level3/index.html](level2/level3/index.html)
* [/level2/index.html](/level2/index.html)
* [/level2/level3/index.html](/level2/level3/index.html)



## Table test

| Column 1        | Column 2         |
| --------------- | ---------------- |
| Row 1, Column 1 | Row 1, Column 2  |

EOM

# Add a second file at the same directory level
cat <<EOM > $DIR/right.md
---
Description: hey now
Theme: wide
Sidebar: right
Mode: light
---
# Sidebar on right.

[Back](index.html)
EOM

# Add a file one directory level deeper
cat <<EOM > $DIR/level2/index.md
---
Description: level 2 directory test
Theme: pillar
Sidebar: none
---
# level2/index.md

No sidebar on this page.

Go deeper to [level 3](level3/index.html)

[Home](../index.html)
EOM

# Add a file two directory level deeper
cat <<EOM > $DIR/level2/level3/index.md
---
Description: level 3 directory test
Theme: wide
Sidebar: none
---
# level2/level3/index.md

Go back down to to [level 2](../index.html)

[Home](/index.html)
EOM





# Generate HTML for the new project.
# -d means print debug output
# -v means use verbose output
# -i means show site information at end
$MB build -d -v -i $DIR

# And display it
open $DIR/.mb/pub/index.html

# DEBUT THEME TEST
cat <<EOM > $DIR/debut.md
---
Description: Debut theme test
Theme: debut 
Mode: light
---
# Debut theme
## Hello, world.
This is Debut!
[Home](/index.html)
EOM

# DEBUT/GALLERY THEME TEST
cat <<EOM > $DIR/debut-gallery.md
---
Description: Debut Gallery theme test
Theme: debut/gallery
Mode: light
---
# Gallery theme

This is debut/gallery, aka {{ .Page.FrontMatter.Theme }}
[Home](/index.html)
EOM


